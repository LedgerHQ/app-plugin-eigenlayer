from web3 import Web3
from tests.utils import run_test, load_contract

contract_delegation_manager = load_contract(
    "39053d51b77dc0d36036fc1fcc8cb819df8ef37a"
)

#https://etherscan.io/tx/0xdbc21a553e3036bede09bde344d0671a72bb298c51c0e2336b978ec2fe55a4b5
def test_undelegate(backend, firmware, navigator, test_name, wallet_addr):
    data = "0xda8be8640000000000000000000000006cca0299d7bf42afe88c0c3e39b97868601611d7"
    run_test(
        contract_delegation_manager, 
        data, 
        backend, 
        firmware, 
        navigator, 
        test_name, 
        wallet_addr
    )

#https://etherscan.io/tx/0x6d46a9ed90e4fcd1615ab8ab03bfaa3d1ed5bba5b71c74184b0e96c42c35fde6
def test_delegate(backend, firmware, navigator, test_name, wallet_addr):
    data = "0xeea9064b0000000000000000000000004cd2086e1d708e65db5d4f5712a9ca46ed4bbd0a00000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
    run_test(
        contract_delegation_manager, 
        data, 
        backend, 
        firmware, 
        navigator, 
        test_name, 
        wallet_addr
    )

#https://etherscan.io/tx/0x16fca2452f124b776febf429f50a47ccc97049c6c8c1cc22221044f4d54ae601
def test_queue_withdrawls(backend, firmware, navigator, test_name, wallet_addr):
    data = "0x0dd8dd020000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000b029e21e8d8a90c3fa58987a6bbf2b0563e5f6ab0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000acb55c530acdb2849e6d4f36992cd8c9d50ed8f7000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000dfbc41f1cf64ab60c000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000b029e21e8d8a90c3fa58987a6bbf2b0563e5f6ab000000000000000000000000000000000000000000000000000000000000000100000000000000000000000054945180db7943c0ed0fee7edab2bd24620256bc0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000072c27dcee1fd5db"
    run_test(
        contract_delegation_manager, 
        data, 
        backend, 
        firmware, 
        navigator, 
        test_name, 
        wallet_addr
    )


#https://etherscan.io/tx/0xc18712afbe8a995c7ce15014435857554b983674bc46aa489d4905e56a82e9b9
def test_complete_queued_withdrawls(backend, firmware, navigator, test_name, wallet_addr):
    data = "0x334043960000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000002a000000000000000000000000000000000000000000000000000000000000002e000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000152f804c2257aa26b353da4123cd9befc47882440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000152f804c2257aa26b353da4123cd9befc4788244000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012e470000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000010000000000000000000000009d7ed45ee2e8fc5482fa2428f15c971e6369011d000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000010858c754ea44fe3000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000001000000000000000000000000a35b1b31ce002fbf2058d22f30f95d405200a15b0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001"
    run_test(
        contract_delegation_manager, 
        data, 
        backend, 
        firmware, 
        navigator, 
        test_name, 
        wallet_addr
    )
